<!DOCTYPE html>  <html lang="en">  
<head>  
  <meta charset="UTF-8" />  
  <title>GamesPlanet Final Order Converter (Full Product + Variant List)</title>  
  <style>  
    body { font-family: sans-serif; padding: 20px; }  
    textarea { width: 100%; height: 250px; font-size: 14px; }  
    pre { background: #f0f0f0; padding: 10px; white-space: pre-wrap; font-size: 14px; }  
    button { padding: 10px 15px; font-size: 14px; margin: 4px; cursor: pointer; }  
  </style>  
</head>  
<body>  <h2>GamesPlanet Final Order Converter (Full Product + Variant List)</h2>  <textarea id="input" placeholder="Paste order details here"></textarea><br><br>  <button onclick="selectAll()">Select All</button>
<button onclick="clearText()">Clear</button>
<button onclick="convert()">Convert</button>
<button onclick="copyAll()">Copy All</button>
<button onclick="sendToCustomer()">Send to Customer WhatsApp</button>
<button onclick="sendToOwn()">Send to Own WhatsApp</button>
<button onclick="sendThanks()">Send Thanks</button>
<button onclick="sendAbandonedCart()">Send Abandoned Cart WhatsApp</button>

<pre id="output"></pre>  <script>  
// Load pincode data  
let pincodeLatLng = {};  
fetch('pincode_data.json')  
  .then(response => response.json())  
  .then(data => { pincodeLatLng = data; })  
  .catch(error => console.log("Error loading pincode data:", error));  
  
// Full product list  
const products = ["Aoko Game Stick","Black Hawk","FMCB","FMCB + USB","FMCB + USB Optional","FMCB + USB Top","G10","G10V3","G11 Pro","G11 Pro Special Edition","G11 Pro Ultimate Edition","GD10","GD30","GD35","Game Box G10","Game Stick Blaster","Game Stick GD10","Game Stick Lite","Game Stick Pro","Game Boy","Game Boy Advance","GS5","K8","M111","M15 Pro","M22","M33","M44","M55","M66","M77","M88","M99","M222","M333","M444","M555","M666","M777","M888","M999","M1000","Nintendo 3DS","Nintendo DS","Nintendo Switch","Nintendo Switch OLED","Nintendo Wii","Nintendo Wii U","Pandora Mini","Pandora Pro","PS1","PS2 Slim","PS3 Slim","PS3 Super Slim","PS4 Fat","PS4 Pro","PS4 Slim","R35S","R36S","SD Card","Sega 16bit Mini U Box","Sega Mini U Box","Sup X7M","USB","X7M","XBOX 360","XBOX One","XBOX Series S","XBOX Series X"];
// Full variant list  
const variants = ["64gb","128gb","256gb","500gb","1tb","64gb optional","128gb optional","256gb optional","500gb optional","1tb optional","dual","single"];  
  
function selectAll() { let input = document.getElementById("input"); input.focus(); input.select(); }  
function clearText() { document.getElementById("input").value = ""; document.getElementById("output").textContent = ""; }  
  
function haversine(lat1, lon1, lat2, lon2) {  
  const R = 6371; const dLat = (lat2 - lat1) * Math.PI / 180; const dLon = (lon2 - lon1) * Math.PI / 180;  
  const a = Math.sin(dLat/2)*Math.sin(dLat/2) + Math.cos(lat1*Math.PI/180) * Math.cos(lat2*Math.PI/180) * Math.sin(dLon/2)*Math.sin(dLon/2);  
  const c = 2 * Math.atan2(Math.sqrt(a), Math.sqrt(1-a)); return R * c;  
}  
  
function estimateDeliveryByDistance(distance) {  
  if (distance <= 30) return "1 day";  
  else if (distance <= 60) return "1-2 days";  
  else if (distance <= 100) return "2-3 days";  
  else if (distance <= 200) return "3-4 days";  
  else if (distance <= 500) return "4-5 days";  
  else if (distance <= 1000) return "4-6 days";  
  else if (distance <= 1500) return "5‚Äì7 days";  
  else if (distance <= 2000) return "6‚Äì8 days";  
  else if (distance <= 3000) return "6‚Äì10 days";  
  else return "8‚Äì12 days (sometimes up to 15 days)";  
}  
  
function convert() {  
  let input = document.getElementById("input").value.toLowerCase();  
  
  let orderId = input.match(/#\d{5,}/)?.[0] || "Not found";  
  let name = input.match(/name\s*\n([^\n]+)/i)?.[1].trim() || "Customer";  
  let mobile = input.match(/mobile\s*\n([^\n]+)/i)?.[1].trim() || "";  
  let altMobile = input.match(/alternate mobile number\s*\n([^\n]+)/i)?.[1].trim() || "";  
  let email = input.match(/email\s*\n([^\n]+)/i)?.[1].trim() || "";  
  let address = input.match(/shipping address\s*\n([^\n]+)/i)?.[1].trim() || "";  
  let pincode = input.match(/\b\d{6}\b/)?.[0] || "";  
  let basePrice = input.match(/1x\s*‚Çπ([\d,]+)/i)?.[1].replace(/,/g,"") || "0";  
  
  let discount = "0";  
  if (input.includes("coupon discount")) {  
    let d = input.match(/coupon discount[^\n]*\n-‚Çπ(\d+)/i);  
    discount = d ? d[1] : "0";  
  }  
  
  let amountPaid = input.match(/Total\s*PAID\s*‚Çπ([\d,]+)/i)?.[1].replace(/,/g,"") || "0";  
  
  // Product detection  
  products.sort((a,b) => b.length - a.length);  
  let detectedProduct = "Unknown Product";  
  for (let p of products) { if (input.includes(p)) { detectedProduct = p.toUpperCase(); break; } }  
  
  // Variant detection  
  let variant = "";  
  for (let v of variants) { if (input.includes(v)) { variant = v.toUpperCase(); break; } }  
  // Variant detection updated for size/storage/variant/verient  
let variant = "";  
let variantMatch = input.match(/(?:size|storage|variant|verient)[:\s]*([^\n]+)/i);  
variant = variantMatch ? variantMatch[1].trim().toUpperCase() : "";  
  
  let city = "Unknown", state = "Unknown", distance = "N/A", eta = "N/A";  
  if (pincode in pincodeLatLng) {  
    let dest = pincodeLatLng[pincode];  
    city = dest.city; state = dest.state;  
    distance = haversine(28.8,79.0,dest.lat,dest.lng).toFixed(0);  
    eta = estimateDeliveryByDistance(distance);  
  }  
  
  let outputText =   
`üü¢ Prepaid Order on Dukaan  
  
Order ID: ${orderId}  
Name: ${name}  
Mobile: ${mobile}  
Alt Mobile: ${altMobile}  
Email: ${email}  
  
Address: ${address}  
Pincode: ${pincode}  
State: ${state}  
District/City: ${city}  
  
Product: ${detectedProduct}  
Variant: ${variant}  
Base Price: ‚Çπ${basePrice}  
Discount Applied: ‚Çπ${discount}  
Amount Paid: ‚Çπ${amountPaid}  
Distance: ${distance} km  
Estimated Delivery: ${eta}`;  
  
  document.getElementById("output").textContent = outputText;  
}  
  
function copyAll() { navigator.clipboard.writeText(document.getElementById("output").textContent).then(() => alert("Output copied to clipboard!")); }  
  
function sendToCustomer() { let mobile = document.getElementById("input").value.match(/\+91[-\s]?[0-9]{10}/)?.[0].replace(/\s|-/g,"") || ""; let msg = encodeURIComponent(document.getElementById("output").textContent); if(mobile) window.open(`https://wa.me/${mobile}?text=${msg}`, "_blank"); else alert("Customer mobile number not found in input."); }  
function sendToOwn() { let msg = encodeURIComponent(document.getElementById("output").textContent); window.open(`https://wa.me/917983624797?text=${msg}`, "_blank"); }  
  
function sendThanks() {  
  let o = document.getElementById("output").textContent;  
  let name = o.match(/Name: ([^\n]+)/)?.[1] || "Customer";  
  let orderId = o.match(/Order ID: ([^\n]+)/)?.[1] || "Not found";  
  let product = o.match(/Product: ([^\n]+)/)?.[1].trim() || "";  
  let variant = o.match(/Variant: ([^\n]+)/)?.[1].trim() || "";  
  let pincode = o.match(/Pincode: ([^\n]+)/)?.[1] || "";  
  let distance = o.match(/Distance: ([^\n]+)/)?.[1] || "";  
  let eta = o.match(/Estimated Delivery: ([^\n]+)/)?.[1] || "";  
  
  let msg = encodeURIComponent(  
`üåü GamesPlanet  
üôè Hello ${name} ji, thank you for your order ${orderId}.  
üì¶ Product: ${product} (${variant})  
üìç Pincode: ${pincode} | üìè Distance: ${distance}  
‚è≥ Estimated Delivery: ${eta}  
üöö Your order will be shipped soon between 8PM‚Äì10PM.  
üîó Tracking will update on our website after dispatch.  
üñºÔ∏è On request, we can send *parcel pic & tracking number* here on WhatsApp.  
üíö Team GamesPlanet`);  
  
  let mobile = document.getElementById("input").value.match(/\+91[-\s]?[0-9]{10}/)?.[0].replace(/\s|-/g,"") || "";  
  if(mobile) window.open(`https://wa.me/${mobile}?text=${msg}`, "_blank"); else alert("Customer mobile number not found in input.");  
}  
  
function sendAbandonedCart() {  
  let o = document.getElementById("output").textContent;  
  let name = o.match(/Name: ([^\n]+)/)?.[1] || "Customer";  
  let orderId = o.match(/Order ID: ([^\n]+)/)?.[1] || "Not found";  
  let product = o.match(/Product: ([^\n]+)/)?.[1].trim() || "";  
  let variant = o.match(/Variant: ([^\n]+)/)?.[1].trim() || "";  
  let city = o.match(/District\/City: ([^\n]+)/)?.[1] || "";  
  let distance = o.match(/Distance: ([^\n]+)/)?.[1] || "";  
  let basePrice = parseInt(o.match(/Base Price: ‚Çπ([\d,]+)/)?.[1].replace(/,/g, '') || "0");  
  let discount = parseInt(o.match(/Discount Applied: ‚Çπ([\d,]+)/)?.[1].replace(/,/g, '') || "0");  
  let prepaidAmount = basePrice - discount;  
  let codAdvance = Math.max(500, Math.round(basePrice * 0.10));  
  let codRemaining = basePrice - codAdvance;  
  
  let eta = o.match(/Estimated Delivery: ([^\n]+)/)?.[1] || "few days";  
  let codEta = eta.includes('day') ? eta.replace(/\d+/g, d => parseInt(d)+2) : eta;  
  
  let msg = encodeURIComponent(  
`üåü GamesPlanet  
  
üôè Hello ${name} ji,  
  
üìù incomplete Order Details:  
‚Äì Order ID: ${orderId}  
‚Äì Product: ${product} (${variant})  
‚Äì Base Price: ‚Çπ${basePrice}  
üìç City: ${city}  
üìè Distance: ${distance}  
  
üí∞ Prepaid Offer: ‚Çπ${basePrice} ‚Äì ‚Çπ${discount} discount = ‚Çπ${prepaidAmount}  
üöö Estimated Delivery:  
‚Äì Prepaid: ${eta}  
  
üíµ COD: ‚Çπ${basePrice} (no discount)  
‚û° COD Advance: ‚Çπ${codAdvance}  
‚û° Remaining on Delivery: ‚Çπ${codRemaining}  
üöö Estimated Delivery:  
‚Äì COD: ${codEta}  
  
üëâ Complete payment soon to confirm your order.  
üíö Team GamesPlanet`);  
  
  let mobile = document.getElementById("input").value.match(/\+91[-\s]?[0-9]{10}/)?.[0].replace(/\s|-/g,"") || "";  
  if(mobile) window.open(`https://wa.me/${mobile}?text=${msg}`, "_blank"); else alert("Customer mobile number not found in input.");  
}  
</script>  </body>  
</html> 
